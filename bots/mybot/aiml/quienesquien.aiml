<?xml version="1.0" encoding="UTF-8"?>
<aiml version="2.0">


<category>
	<pattern>^ jugar ^</pattern>
	<template>
		Quieres jugar al quien es quien
	</template>
</category>


<category>
	<pattern>Si</pattern>
	<that>QUIERES JUGAR AL QUIEN ES QUIEN</that>
	<template>
		Piensas un personaje o lo pienso yo
	</template>
</category>

<category>
	<pattern>^ yo ^</pattern>
	<that>PIENSAS UN PERSONAJE O LO PIENSO YO</that>
	<template>
		<think>
			<set name="sino">YES</set>
			<set name="tramparasgo">end</set>
			<set name="trampavalorrasgo">end</set>
			<set name="personajes">Alejandro Alfonso Antonio Cristina Gabriela Ivan Javier Juan Laura Luis Marco Maria Paco Pepe Sofia Sonia</set>

			

			<set name="Pelo">rubio moreno marron calvo pelirrojo blanco negro</set>
			<set name="Ojos">claros oscuros</set>
			<set name="Gafas">si no</set>
			<set name="Bigote">si no</set>
			<set name="Barba">si no</set>
			<set name="Genero">hombre mujer</set>
			<set name="Piel">clara oscura</set>

			<set name="ask">Pelo Ojos Gafas Bigote Barba Genero Piel</set>
		</think>
		<srai>HACER PREGUNTA</srai>
	</template>
</category>



<category>
<pattern>HACER PREGUNTA</pattern>
<template>
	<think>

		<!-- EXTRAEMOS EL RASGO -->
	<set name="rasgo"><srai>TOP <get name="ask"/></srai></set>
	<!-- EXTRAEMOS EL VALOR -->
	<set name="valorrasgo"><srai>TOP <get> <name><get name="rasgo"/></name></get></srai></set>
	</think>
	<!-- BUSCAMOS Y HACEMOS LA PREGUNTA -->
	<set var="pregunta"><map><name><get name="rasgo"/></name><get name="valorrasgo"/></map></set>

	<think>
	<set name="topic">siono</set>
	</think>
</template>
</category>


<topic name="siono">
<category>
	<pattern>Si</pattern>
	<template>
		<!-- <get name="personajes"/> -->
		<think>
			<!-- BORRAMOS LA PREGUNTA -->
			<set name="ask"><srai>REMAIN <get name="ask"/></srai></set>
			<set name="sino">YES</set>
			<set name="tramparasgo">
				<srai>ADDITEM <get name="rasgo"/> IN <get name="tramparasgo"/></srai>
			</set>
			<set name="trampavalorrasgo">
				<srai>ADDITEM <get name="valorrasgo"/> IN <get name="trampavalorrasgo"/></srai>
			</set>
		</think>
		<srai>BORRAR PERSONAJE</srai>
		
	</template>
</category>


<category>
	<pattern>No</pattern>
	<template>

		
		<think>
			<set> <name><get name="rasgo"/></name><srai>removeitem 1 IN <get> <name><get name="rasgo"/></name></get></srai></set>

			<set var="cnt">
				<srai>COUNT <get> <name><get name="rasgo"/></name></get></srai>
			</set>

			<condition var="cnt">
				<li value="1">
					<set name="valorrasgo">
						<srai>TOP <get> <name><get name="rasgo"/></name></get></srai>
					</set>
					<set name="ask">
						<srai>REMAIN <get name="ask"/></srai>
					</set>
					<set name="sino">YES</set>
					<set name="tramparasgo">
						<srai>ADDITEM <get name="rasgo"/> IN <get name="tramparasgo"/></srai>
					</set>
					<set name="trampavalorrasgo">
						<srai>ADDITEM <get name="valorrasgo"/> IN <get name="trampavalorrasgo"/></srai>
					</set>
				</li>

				<li><set name="sino">NO</set></li>
			</condition>


		</think>
		<srai>BORRAR PERSONAJE</srai>

		<!-- <think>
		<set name="topic">unknown</set>
		</think>
		<srai>HACER PREGUNTA</srai> -->
		
	</template>
</category>

</topic>



<category>
	<pattern>BORRAR PERSONAJE</pattern>
	<template>
			<think>
			<set var="item">
				<srai> ITERATE <get name="personajes"/> </srai>
			</set>
			</think>

			<!-- BUCLE QUE RECORRE EL SET -->
		
			<think>
			<condition var="item">
				<!-- MIENTRAS NO SEA EL TERMINADOR -->
				<li value="end"></li>
				<li> <get var="item"/>
					<!-- SACAMOS DEL MAP ASOCIADO AL PERSONAJE SU RESPUESTA A LA PREGUNTA -->
					<set var="busqueda"><map><name><get var="item"/></name><get name="rasgo"/></map></set>
					<!-- COMPARAMOS LA RESPUESTA -->
					<set var="iguales">
					<srai>
						COMPARE <get name="valorrasgo"/> WITH <get var="busqueda"/>
					</srai>
					</set>
					<!-- SI SON IGUALES NO HACEMOS NADA, SI SON DISTINTAS BORRAMOS -->
					<condition var="iguales">
						<li> <value><get name="sino"/></value></li>
						<li>

							<!-- BUSCAMOS LA POSICION -->
							<set var="pos">
								<srai>FINDITEM <get var="item"/> IN <get name="personajes"/></srai>
							</set>
							<!-- SI ES IGUAL LA BORRAMO -->
							<set name="personajes">
								<srai>
									REMOVEITEM <get var="pos"/> IN <get name="personajes"/>
								</srai>
							</set>
						</li>
					</condition>

					<!-- AVANZAMOS ITERACCIONES -->
					<think>
					<set var="item">
					<srai>NEXT</srai>
					</set>
					</think>
					<loop/>
				</li>
			</condition>


		</think>
		<!-- CONTAMOS NUMERO DE PERSONAJES -->
		<think>
			<set var="cantidad">
				<srai>COUNT <get name="personajes"/></srai>
			</set>
		</think>

		<!-- <get name="personajes"/> -->

		<!-- SI SOLO QUEDA UNO TERMINAMOS SI NO VOLVEMOS A PREGUNTAR -->

		<condition var="cantidad">
			<li value="1">
				<srai>ADIVINAR PERSONAJE</srai>
			</li>

			<li value="0">
				La respuestas no corresponden a ningun personaje. la proxima vez intenta jugar bien.
			</li>

			<li>
				<think>
				<set name="topic">unknown</set>
				</think>
				<srai>HACER PREGUNTA</srai>
			</li>
		</condition>
	</template>
</category>


<category>
	<pattern>ADIVINAR PERSONAJE</pattern>
	<template>
		¿Es <set var="encontrado"><srai>TOP <get name="personajes"/></srai></set>?



		<think>
		<set name="topic">adivina</set>
		</think>
	</template>
</category>

<topic name="adivina">
<category>
	<pattern>Si</pattern>
	<template>
		¡¡¡¡Si esque soy el puto amo!!!!
		Lo que hay en rasgo es: <get name="tramparasgo"/>
		Lo que hay en valor es: <get name="trampavalorrasgo"/>
		<think>
			<set name="topic">unknown</set>
		</think>
	</template>
</category>

<category>
	<pattern>No</pattern>
	<template>
		Quien es
	</template>
</category>

<category>
	<pattern><set>personajesenteros</set></pattern>
	<that>QUIEN ES</that>
	<template>

		Lo que hay en rasgo es: <get name="tramparasgo"/>
		Lo que hay en valor es: <get name="trampavalorrasgo"/>

		<think>
			<set var="pers"><star/></set>
			<set var="err">.</set>
			<set var="erres">unknown</set>
			<set var="ras">
				<srai> ITERATE <get name="tramparasgo"/> </srai>
			</set>
			<set var="val">
				<srai> ITERATE <get name="trampavalorrasgo"/> </srai>
			</set>
		</think>

		RAS vale: <get var="ras"/>
		VAL vale: <get var="val"/>

		<!-- <think> -->
			<condition var="ras">
				<!-- MIENTRAS NO SEA EL TERMINADOR -->

				RAS vale: <get var="ras"/>
				VAL vale: <get var="val"/>

				<li value="end"></li>
				<li>
					La persona es: <get var="pers"/>
					La persona es: <star/>
					<set var="busqueda"><map><name><get var="pers"/></name><get var="ras"/></map></set>
					Busqueda vale: <get var="busqueda"/>
					<set var="iguales">
						<srai>
							COMPARE <get var="val"/> WITH <get var="busqueda"/>
						</srai>
					</set>

					<condition var="iguales">
						<li value="YES"></li>
						<li>
							<condition var="ras">
								<li value="Barba">
									<set var="err">
										<srai>ADDITEM <get var="ras"/> IN <get var="err"/></srai>
									</set>
								</li>

								<li value="Gafas">
									<set var="err">
										<srai>ADDITEM <get var="ras"/> IN <get var="err"/></srai>
									</set>
								</li>

								<li value="Bigote">
									<set var="err">
										<srai>ADDITEM <get var="ras"/> IN <get var="err"/></srai>
									</set>
								</li>

								<li value="Genero">
									<set var="erres"><get var="ras"/></set>
								</li>
								<li>
									<set var="err">
										<srai>ADDITEM <get var="ras"/> IN <get var="err"/></srai>
									</set>
									<set var="err">
										<srai>ADDITEM <get var="val"/> IN <get var="err"/></srai>
									</set>
								</li>
							</condition>
						</li>
					</condition>
					<think>
					<set var="ras">
						<srai>NEXT</srai>
					</set>
					<set var="val">
						<srai>NEXT</srai>
					</set>
					</think>
					<loop/>
				</li>
			</condition>
		<!-- </think> -->

		Eso es mentira <star/> se diferencian en <get var="err"/>

	</template>
</category>

</topic>



</aiml>